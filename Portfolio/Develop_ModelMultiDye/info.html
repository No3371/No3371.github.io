<img class="app-screen-image hcblock" src="https://raw.githubusercontent.com/No3371/No3371.github.io/master/Portfolio/Develop_ModelMultiDye/Assets/SS.jpg" style="max-width: 100%"/><h1>材質分區通道混合染色</h1><h3> <a href="https://no3371.github.io/Portfolio/Develop_ModelMultiDye/Demo/index.html">DEMO</a></h3><p>染色系統在材質複用、遊戲機制上有許多用途。《瑪奇》的染色系統十分受玩家喜愛，遊戲中的服裝通常切分了 1 ~ 3 個染色區塊，根據設定材質的不同，玩家可以使用皮革染色劑、金屬染色劑、普通染色劑對各區域進行調色，製作出完全獨特的個人服裝。</p><p>我深受《瑪奇》影響，一直很想復刻或是製作出更好的染色系統，但一直沒找到其實作方法。只有聽說是將模型分塊製作後在執行期修改頂點色資料後再組合到玩家模型上。</p><p>而在 Unity 中，直接在 Shader/材質球 上進行調整無疑是更好的 workflow。</p><p>而染色實作的部分，我根據網路上的理論簡介實作了如 Photoshop 中的「通道混合」，優點是不容易影響貼圖細節、靈活性極高，缺點則是可調整值較多、且色彩變化不如 HSL 直觀。</p><p>此方法支援 8 個分區，也就是可以對一個材質的八個區塊分別調色。</p><h3>實作</h3><p>簡單來說，準備一張與原材質相對應的分區貼圖，對不同分區在 R/G/B 色彩通道中填滿，將通道當作 bool flag，總共有 0 / R / G / B / RG / RB / GB / RB 八種組合，在 Shader 中對此貼圖採樣後計算分區編號，再取相對應分區的調色參數做通道混合。</p>